/*
First time? Check out the tutorial game:
https://sprig.hackclub.com/gallery/getting_started

@title: holy_graph
@author: 
@tags: []
@addedOn: 2024-00-00
*/
const melody = tune`
500: D4^500,
500: C4~500 + D4~500,
500: D4^500,
500: D4~500 + C4~500,
500: E4^500,
500: D4-500,
500: E4^500 + D4^500,
500: D4-500,
500: E4^500 + D4^500,
500: D4-500,
500: D4^500 + E4^500,
500: D4-500 + C4-500,
500: D4-500 + E4-500 + F4-500,
500: E4-500,
500: E4^500 + D4-500,
500: C4-500,
500: D4~500 + E4~500,
500: E4^500,
500: E4~500 + D4~500,
500: F4^500,
500: E4-500,
500: F4^500 + E4^500,
500: E4-500,
500: F4^500 + E4^500,
500: E4-500,
500: F4^500 + E4^500,
500: E4-500 + D4-500,
500: E4-500 + F4-500 + G4-500,
500: F4-500,
500: E4-500 + F4^500,
500: D4-500,
500: C4-500`
const playback = playTune(melody, Infinity)

const player = "p"
const track = "t"
const bg = "b"
const lvl = "l"
const blank = "w"
const letterA = "A"
const letterB = "B"
const letterC = "C"
const letterD = "D"
const letterE = "E"
const letterF = "F"
const letterG = "G"
const letterH = "H"
const letterI = "I"
const letterJ = "J"
const letterK = "K"
const letterL = "L"
const letterM = "M"
const letterN = "N"
const letterO = "O"
const letterP = "P"
const letterQ = "Q"
const letterR = "R"
const letterS = "S"
const letterT = "T"
const letterU = "U"
const letterV = "V"
const letterW = "W"
const letterX = "X"
const letterY = "Y"
const letterZ = "Z"
const blue_square = "p"
const green_square = "g"
const red_square = "e"
const rocket = "r"
const spaceship = "s"
const up = "u"
const right = "z"
const left = "y"


setLegend(
  [ player, bitmap`
................
................
.......000......
.......0.0......
......0..0......
......0...0.0...
....0003.30.0...
....0.0...000...
....0.05550.....
......0...0.....
.....0....0.....
.....0...0......
......000.......
......0.0.......
.....00.00......
................` ],
  [ blank, bitmap`
2222222222222222
2222222222222222
2222222222222222
2222222222222222
2222222222222222
2222222222222222
2222222222222222
2222222222222222
2222222222222222
2222222222222222
2222222222222222
2222222222222222
2222222222222222
2222222222222222
2222222222222222
2222222222222222` ],
  [ bg, bitmap`
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000` ],
    [ lvl, bitmap`
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777000000007777
7777000000007777
7777000000007777
7777000000007777
7777000000007777
7777000000007777
7777000000007777
7777000000007777
7777777777777777
7777777777777777
7777777777777777
7777777777777777` ],
    [ track, bitmap`
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777` ],
[letterA, bitmap`
0000000000000000
0000033333300000
0000033333300000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000333333330000
0000333333330000
0000330000330000
0000330000330000
0000330000330000
0000000000000000`],
  [letterB, bitmap`
0000000000000000
0000333333000000
0000333333300000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000333333300000
0000333333300000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000333333300000
0000333333000000
0000000000000000`],
  [letterC, bitmap`
0000000000000000
0000033333330000
0000333333333000
0003330000033000
0003300000000000
0003300000000000
0003300000000000
0003300000000000
0003300000000000
0003300000000000
0003300000000000
0003300000000000
0003330000033000
0000333333333000
0000033333330000
0000000000000000`],
  [letterD, bitmap`
0000000000000000
0000333330000000
0000333333300000
0000330003330000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000330003330000
0000333333300000
0000333330000000
0000000000000000`],
  [letterE, bitmap`
0000000000000000
0000333333330000
0000333333330000
0000330000000000
0000330000000000
0000330000000000
0000333333300000
0000333333300000
0000330000000000
0000330000000000
0000330000000000
0000330000000000
0000330000000000
0000333333330000
0000333333330000
0000000000000000`],
  [letterF, bitmap`
0000000000000000
0000333333330000
0000333333330000
0000330000000000
0000330000000000
0000330000000000
0000333333300000
0000333333300000
0000330000000000
0000330000000000
0000330000000000
0000330000000000
0000330000000000
0000330000000000
0000330000000000
0000000000000000`],
  [letterG, bitmap`
0000000000000000
0000033333330000
0000333333333000
0003330000033000
0003300000033000
0003300000000000
0003300000000000
0003300000000000
0003300003333000
0003300003333000
0003300000033000
0003330000033000
0003333000333000
0000333333333000
0000033333330000
0000000000000000`],
  [letterH, bitmap`
0000000000000000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000333333330000
0000333333330000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000000000000000`],
  [letterI, bitmap`
0000000000000000
0000033333300000
0000033333300000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000033333300000
0000033333300000
0000000000000000`],
  [letterJ, bitmap`
0000000000000000
0000033333300000
0000033333300000
0000000033000000
0000000033000000
0000000033000000
0000000033000000
0000000033000000
0000000033000000
0000033033000000
0000033033000000
0000033033000000
0000033333000000
0000033333000000
0000003330000000
0000000000000000`],
  [letterK, bitmap`
0000000000000000
0003300000033000
0003300000333000
0003300003330000
0003300033300000
0003300333000000
0003303330000000
0003333300000000
0003333300000000
0003303330000000
0003300333000000
0003300033300000
0003300003330000
0003300000333000
0003300000033000
0000000000000000`],
  [letterL, bitmap`
0000000000000000
0000330000000000
0000330000000000
0000330000000000
0000330000000000
0000330000000000
0000330000000000
0000330000000000
0000330000000000
0000330000000000
0000330000000000
0000330000000000
0000330000000000
0000333333330000
0000333333330000
0000000000000000`],
  [letterM, bitmap`
0000000000000000
0003330000333000
0003333003333000
0003333333333000
0003303333033000
0003300330033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0000000000000000`],
  [letterN, bitmap`
0000000000000000
0003300000033000
0003300000033000
0003330000033000
0003333000033000
0003333300033000
0003303330033000
0003300333033000
0003300033333000
0003300003333000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0000000000000000`],
  [letterO, bitmap`
0000000000000000
0000033333300000
0000333333330000
0003330000333000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003330000333000
0000333333330000
0000033333300000
0000000000000000`],
  [letterP, bitmap`
0000000000000000
0000333333300000
0000333333330000
0000330003330000
0000330000330000
0000330000330000
0000330003330000
0000333333330000
0000333333300000
0000330000000000
0000330000000000
0000330000000000
0000330000000000
0000330000000000
0000330000000000
0000000000000000`],
  [letterQ, bitmap`
0000000000000000
0000033333300000
0000333333330000
0000333003330000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000333003330000
0000333333330000
0000033333300000
0000000003330000
0000000000330000
0000000000000000`],
  [letterR, bitmap`
0000000000000000
0000333333300000
0000333333330000
0000330000330000
0000330000330000
0000330000330000
0000330000330000
0000333333330000
0000333333300000
0000333300000000
0000333330000000
0000330333000000
0000330033300000
0000330003330000
0000330000330000
0000000000000000`],
  [letterS, bitmap`
0000000000000000
0000333333330000
0003333333333000
0003300000033000
0003300000033000
0003300000000000
0003300000000000
0003333333330000
0000333333333000
0000000000033000
0000000000033000
0003300000033000
0003300000033000
0003333333333000
0000333333330000
0000000000000000`],
  [letterT, bitmap`
0000000000000000
0000333333330000
0000333333330000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000000000000`],
  [letterU, bitmap`
0000000000000000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003330000333000
0000333333330000
0000333333330000
0000000000000000`],
  [letterV, bitmap`
0000000000000000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003330000333000
0000333003330000
0000033333300000
0000003333000000
0000000000000000`],
  [letterW, bitmap`
0000000000000000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003300330033000
0003300330033000
0003300330033000
0003300330033000
0003300330033000
0003333333333000
0000333333330000
0000033003300000
0000000000000000`],
  [letterX, bitmap`
0000000000000000
0003300000033000
0003300000033000
0003300000033000
0003300000033000
0003330000333000
0000333003330000
0000033333300000
0000003333000000
0000033333300000
0000333003330000
0003330000333000
0003300000033000
0003300000033000
0003300000033000
0000000000000000`],
  [letterY, bitmap`
0000000000000000
0003300000033000
0003300000033000
0003330000333000
0000333003330000
0000033333300000
0000003333000000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000330000000
0000000000000000`],
  [letterZ, bitmap`
0000000000000000
0003333333333000
0003333333333000
0000000000033000
0000000000333000
0000000003330000
0000000033300000
0000000333000000
0000003330000000
0000033300000000
0000333000000000
0003330000000000
0003300000000000
0003333333333000
0003333333333000
0000000000000000`],
  [blue_square, bitmap`
22222222222222222
27777777777777772
27777777777777772
27777777777777772
27777777777777772
27777777777777772
27777777777777772
27777777777777772
27777777777777772
27777777777777772
27777777777777772
27777777777777772
27777777777777772
27777777777777772
27777777777777772
22222222222222222`],
  [red_square, bitmap`
22222222222222222
23333333333333332
23333333333333332
23333333333333332
23333333333333332
23333333333333332
23333333333333332
23333333333333332
23333333333333332
23333333333333332
23333333333333332
23333333333333332
23333333333333332
23333333333333332
23333333333333332
22222222222222222`],
  [green_square, bitmap`
22222222222222222
24444444444444442
24444444444444442
24444444444444442
24444444444444442
24444444444444442
24444444444444442
24444444444444442
24444444444444442
24444444444444442
24444444444444442
24444444444444442
24444444444444442
24444444444444442
24444444444444442
22222222222222222`],
  [rocket, bitmap`
22222222222222222
28888888888888882
28222222222222282
28333333333333382
28299999999999282
28226666666662282
28222444444422282
28222277777222282
28222225552222282
28222222H22222282
28222222H22222282
28222222222222282
28222222222222282
28222222222222282
28888888888888882
22222222222222222`],
  [spaceship, bitmap`
22222222222222222
23333333333333332
23233333233333232
23323333233332332
23332333233323332
23333233233233332
23333323232333332
23333332223333332
23222222322222232
23333332223333332
23333323232333332
23333233233233332
23332333233323332
23323333233332332
23233333233333232
23333333333333332
22222222222222222`],
  [up, bitmap`
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
2222222..22222222
2222222..22222222
2222222..22222222
2222222..22222222
2222222..22222222
2222222..22222222
22222222222222222
22222222222222222
22222222222222222`],
  [right, bitmap`
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222`],
  [left, bitmap`
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222
22222222222222222`],
);

setSolids([])

/*
Level 0 = Welcome screen
Level 1 = Help screen
Level 2 = First game screen
Level 3 = Game
Level 4 = Blackhole
*/

let level = 0
const levels = [
  map`
bbbbbbbbbbbbbbbbbbbbbbbb`, 
  map`
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbttttttttbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbtttbbbbbbtttbbbbbbbbbbbbbb
bbbbbbbbbbbtltbbbttttbbbtttbbbbbbbbbbbb
bbbbbbbbbbttbbbttlbbtttbbbttbbbbbbbbbbb
bbbbbbbbbbtbbtttbbbbbbtttbblbbbbbbbbbbb
bbbbbbbbbttbbtbbbbttbbbbtbbttbbbbbbbbbb
bbbbbbbbbtbbttbbttttttbbttbbtbbbbbbbbbb
bbbbbbbbttbbtbbbtbbbbtbbbtbbttbbbbbbbbb
bbbbbbbbtbbttbbttbbbbttbbttbbtbbbbbbbbb
bbbbbbbttbbtbbbtbbttbbtbbbtbbttbbbbbbbb
bbbbbbbttbbtbbbtbbttbbtbbbtbbttbbbbbbbb
bbbbbbbbtbbttbbttbbbbttbbttbbtbbbbbbbbb
bbbbbbbbttbbtlbbtbbbbtbbblbbttbbbbbbbbb
bbbbbbbbbtbbttbbttttttbbttbbttbbbbbbbbb
bbbbbbbbbttbbtbbbbttbbbbtbbttbbbbbbbbbb
bbbbbbbbbblbbtttbbbbbbtttbbtbbbbbbbbbbb
bbbbbbbbbbttbbbtttbbtttbbbttbbbbbbbbbbb
bbbbbbbbbbbtttbbbttttbbbttlbbbbbbbbbbbb
bbbbbbbbbbbbbtttbbbbbbtttbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbttttttttbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb`, 
    map`
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbttttttttbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbtttbbbbbbtttbbbbbbbbbbbbbb
bbbbbbbbbbbtltbbbttttbbbtttbbbbbbbbbbbb
bbbbbbbbbbttbbbttlbbtttbbbttbbbbbbbbbbb
bbbbbbbbbbtbbtttbbbbbbtttbblbbbbbbbbbbb
bbbbbbbbbttbbtbbbbttbbbbtbbttbbbbbbbbbb
bbbbbbbbbtbbttbbttttttbbttbbtbbbbbbbbbb
bbbbbbbbttbbtbbbtbbbbtbbbtbbttbbbbbbbbb
bbbbbbbbtbbttbbttbbbbttbbttbbtbbbbbbbbb
bbbbbbbttbbtbbbtbbttbbtbbbtbbttbbbbbbbb
bbbbbbbttbbtbbbtbbttbbtbbbtbbttbbbbbbbb
bbbbbbbbtbbttbbttbbbbttbbttbbtbbbbbbbbb
bbbbbbbbttbbtlbbtbbbbtbbblbbttbbbbbbbbb
bbbbbbbbbtbbttbbttttttbbttbbttbbbbbbbbb
bbbbbbbbbttbbtbbbbttbbbbtbbttbbbbbbbbbb
bbbbbbbbbblbbtttbbbbbbtttbbtbbbbbbbbbbb
bbbbbbbbbbttbbbtttbbtttbbbttbbbbbbbbbbb
bbbbbbbbbbbtttbbbttttbbbttlbbbbbbbbbbbb
bbbbbbbbbbbbbtttbbbbbbtttbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbttttttttbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb`, 
    map`
.............
wwwwwwrwwwwww
wwwwwwtwwwwww
wwwwwwewwwwww
wwwwwwtwwwwww
wwwwwwgwwwwww
wwwwwwtwwwwww
wwwwwwgwwwwww
wwwwwwswwwwww
wwwwwwwwwwwww
.............`, 
  map`
bbbbbbbbbbbbbbbb
bbYOUbVEbBEENbbb
bbbbbbbbbbbbbbbb
bbABSORBEDbBYbbb
bbbbbbbbbbbbbbbb
bTHEbBLACKbHOLEb
bbbbbbbbbbbbbbbb`, 
]

let isMuted = false; // Variable to track if any melody is muted

onInput("k", () => {
  if (isMuted == false) {
    playback.end(); // Mute all music
    isMuted = true; // Set the isMuted flag to true
  }
})
addText(              "Welcome to the Holy", { y: 5, color: color`7` });
addText(              "Graph! Try your best", { y: 7, color: color`7` });
addText(              "to finish the core!", { y: 9, color: color`7` });
addText(              "Press \"a\" to start", { y: 14, color: color`7` });

let start_game = false

onInput("a", () => {
  if (start_game == false) {
    start_game = true; // Set the isMuted flag to true
    level = 1
    clearText();
    setMap(levels[level])
  }
})


let timeLeft = 10; // Set the initial time limit to 120 seconds

// Display the time left on the screen

// Function to update timer every second
const timerInterval = setInterval(() => {
  // Check if the level is 0 and set the timer to 120
  if (level == 1) {
    timeLeft -= 1; // Decrement time left by 1 second
    // Update the displayed time
    clearText();
    addText(`Days Left: ${timeLeft+1}`, { x: 3, y: 1, color: color`2` })
  }
  if (timeLeft < 0 && level < 4) {
    level = 4; // Set level to 4 if time runs out before reaching level 2
    setMap(levels[level]); // Load level 4
  }
}, 1000); // Update timer every second



setMap(levels[level])

setPushables({
  [ player ]: []
})

// onInput("s", () => {
//   getFirst(player).y += 1
// })

afterInput(() => {
  
})